在C语言中，`#define`和`typedef`都是用于定义新的名称的工具，但它们的用途和工作机制有所不同。以下是它们的主要区别：

### 1. **用途和作用**

- **`#define`**：用于定义**宏**或**常量**，也可以用于定义表达式或简单的代码片段，主要是文本替换。
  ```c
  #define PI 3.14
  #define SQUARE(x) ((x) * (x))
  ```

- **`typedef`**：用于定义**类型的别名**，使代码更具可读性或简化复杂的类型声明。
  ```c
  typedef unsigned long ulong;
  typedef int (*func_ptr)(int, int);  // 定义函数指针类型
  ```

### 2. **工作机制**

- **`#define`**：是一种预处理指令，编译器在编译之前会对所有`#define`定义的符号进行**文本替换**。这意味着`#define`没有数据类型的概念，也没有类型检查。
- **`typedef`**：是在编译时生效的，用于为现有类型定义新的别名，不进行文本替换，因此**具有类型检查**。

### 3. **类型安全性**

- **`#define`**：没有类型检查，例如定义`#define PI 3.14`时，它只是一个文本替换，在编译期间不会检查`PI`的类型。
- **`typedef`**：提供类型检查。用`typedef`定义的别名在编译时可以作为一种类型使用，编译器会进行类型检查，从而增强了代码的安全性。

### 4. **适用范围**

- **`#define`**：可以用来定义常量、宏（例如，简单的计算）、甚至代码片段。
- **`typedef`**：只能用来定义类型的别名。

### 5. **复杂类型声明的简化**

- **`#define`**：通常用于简单的文本替换，不适合复杂类型。
- **`typedef`**：适合用于简化复杂的类型声明，尤其是指针、函数指针等复杂类型。例如，定义函数指针时可以用`typedef`简化：
  ```c
  typedef int (*func_ptr)(int, int);
  ```

### 示例对比

```c
#include <stdio.h>

#define PI 3.14               // 宏定义常量
#define SQUARE(x) ((x) * (x)) // 宏定义函数

typedef unsigned long ulong;  // 定义类型别名
typedef int (*func_ptr)(int); // 定义函数指针类型的别名

int square(int x) {           // 正常函数
    return x * x;
}

int main() {
    printf("PI: %f\n", PI);                 // 输出3.14
    printf("SQUARE(5): %d\n", SQUARE(5));   // 输出25

    ulong number = 100;                     // 使用typedef定义的别名
    printf("Number: %lu\n", number);        // 输出100

    func_ptr f = square;                    // 使用函数指针类型别名
    printf("Square of 6: %d\n", f(6));      // 输出36
    return 0;
}
```

### 总结

| 特性               | `#define`                            | `typedef`                       |
|--------------------|--------------------------------------|----------------------------------|
| 用途               | 定义常量、宏和简单代码片段           | 定义类型别名                    |
| 工作机制           | 预处理期间文本替换                   | 编译期间作为类型                 |
| 类型检查           | 无                                   | 有                               |
| 使用场景           | 常量、简单计算                       | 复杂类型（如指针、函数指针等）  |
| 类型安全性         | 低                                   | 高                               |

**使用建议**：
- **常量或简单表达式**使用`#define`，但注意文本替换的风险。
- **类型定义或复杂类型**（如指针、结构体）使用`typedef`，提高代码可读性和类型安全性。